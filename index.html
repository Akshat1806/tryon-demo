<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Virtual Jersey Try-On</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 40px auto;
    }
    img {
      max-width: 100%;
      margin-top: 20px;
    }
    button {
      margin-top: 20px;
      padding: 10px 16px;
      font-size: 16px;
    }
  </style>
</head>
<body>

  <h2>Virtual Jersey Try-On (Demo)</h2>

  <label>User Image</label><br />
  <input type="file" id="userImage" accept="image/*" /><br /><br />

  <label>Jersey Image</label><br />
  <input type="file" id="jerseyImage" accept="image/*" /><br />

  <button id="tryOnBtn">Try On</button>

  <h3>Result</h3>
  <img id="resultImage" />

  <script>
    const tryOnBtn = document.getElementById("tryOnBtn");
    const resultImage = document.getElementById("resultImage");

    function fileToBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result.split(",")[1]);
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    tryOnBtn.addEventListener("click", async () => {
      const userFile = document.getElementById("userImage").files[0];
      const jerseyFile = document.getElementById("jerseyImage").files[0];

      if (!userFile || !jerseyFile) {
        alert("Please upload both images");
        return;
      }

      try {
        const userBase64 = await fileToBase64(userFile);
        const jerseyBase64 = await fileToBase64(jerseyFile);

        const res = await fetch("https://YOUR_BACKEND_URL/tryon", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            userImageBase64: userBase64,
            jerseyImageBase64: jerseyBase64
          })
        });

        const data = await res.json();

        // backend should return base64 image
        resultImage.src = "data:image/jpeg;base64," + data.outputImageBase64;

      } catch (err) {
        console.error(err);
        alert("Something went wrong");
      }
    });
  </script>

</body>
</html>
